function A = derivativeParamDynamicsDualStateNonLinear(Xhat, model)

dt = model.dtKalman;

% df = paramdynamicsDerivativesNonLinear(...
%     Xhat(1) ,Xhat(2),Xhat(3) , ...
%     model.m, model.k(1),model.k(2),model.c);

df = paramdynamicsDerivativesNonLinear(...
    Xhat(1) ,Xhat(2),model.f , ...
    model.m, model.k(1),model.k(2),model.c);

A = df.*dt + eye(size(df));

end
